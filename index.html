<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="icon" href="icon.png" type="image/png">
      <title>Motor Database</title>
      <link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.13.7/css/jquery.dataTables.min.css">
      <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
      <script type="text/javascript" src="//cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
   </head>
   <body>
      <div><a href="https://github.com/marc-frank/motor-database">Contribute here - https://github.com/marc-frank/motor-database</a></div>
      <br>
      <table id="myTable" class="display">
         <thead>
            <tr>
               <!-- Dynamic header will be generated here -->
            </tr>
         </thead>
         <tbody>
            <!-- Data will be loaded here -->
         </tbody>
         <tfoot>
            <tr>
               <!-- Dynamic footer will be generated here -->
            </tr>
         </tfoot>
      </table>
      <script>
         $(document).ready(function () {
            $.getJSON('database.json', function(data) {
               // Find unique keys
               var keys = {};
               data.forEach(function(item) {
                  Object.keys(item).forEach(function(key) {
                     keys[key] = true;
                  });
               });

               // Generate dynamic headers and footers
               var headerFooterRow = '';
               Object.keys(keys).forEach(function(key) {
                  headerFooterRow += '<th>' + key + '</th>';
               });
               $('#myTable thead tr, #myTable tfoot tr').html(headerFooterRow);

               // Create columns configuration
               var columns = Object.keys(keys).map(function(key) {
                  if (key === 'Image') {
                     return { 
                        data: key, 
                        render: function(data) {
                           return '<img src="'+data+'" alt="Image" width="128" height="128">';
                        }
                     };
                  }
                  return { data: key };
               });

               // Initialize DataTable
               $('#myTable').DataTable({
                  data: data,
                  columns: columns,
                  "lengthMenu": [[10, 25, 50, 100, 250, -1], [10, 25, 50, 100, 250, "All"]],
                  "pageLength": 10,
                  orderCellsTop: true,
                  fixedHeader: true,
                  // Additional DataTable configurations...
               });
            });
         });
      </script>
   </body>
</html>
